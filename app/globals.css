@import "tailwindcss";

@theme {
  /* === Colors — Dark monochrome palette === */
  /* Background: near-black charcoal (softer than pure black, less harsh on screens) */
  --color-background: #0a0a0a;

  /* Text hierarchy — all verified WCAG AA compliant against #0a0a0a */
  --color-text-primary: #f5f5f5;    /* Ratio: 18.2:1 — main body text */
  --color-text-secondary: #a3a3a3;  /* Ratio: 7.8:1  — supporting text, descriptions */
  --color-text-tertiary: #7a7a7a;   /* Ratio: 4.6:1  — subtle labels, metadata */

  /* Accent — muted steel blue for emphasis and CTAs */
  --color-accent: #7a9eb8;          /* Ratio: ~5.5:1 — muted steel blue, WCAG AA compliant against #0a0a0a */

  /* === Typography — Font families === */
  --font-sans: var(--font-inter), ui-sans-serif, system-ui, sans-serif;
  --font-display: var(--font-manrope), ui-sans-serif, system-ui, sans-serif;
  --font-mono: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, monospace;

  /* === Typography — Fluid type scale (Perfect Fourth 1.333 ratio) === */
  /* Each level: clamp(min, preferred, max) */
  /* Min: mobile (320px), Max: desktop (1280px+) */
  --font-size-sm: clamp(0.875rem, 0.83rem + 0.22vw, 1rem);
  --font-size-base: clamp(1rem, 0.94rem + 0.28vw, 1.125rem);
  --font-size-lg: clamp(1.125rem, 1rem + 0.63vw, 1.5rem);
  --font-size-xl: clamp(1.5rem, 1.25rem + 1.25vw, 2rem);
  --font-size-2xl: clamp(2rem, 1.5rem + 2.5vw, 2.667rem);
  --font-size-3xl: clamp(2.5rem, 1.88rem + 3.13vw, 3.375rem);
  --font-size-4xl: clamp(3rem, 2.25rem + 3.75vw, 4rem);
  --font-size-5xl: clamp(3.5rem, 2.5rem + 5vw, 5rem);

  /* === Typography — Letter-spacing tokens === */
  --tracking-editorial: -0.035em;

  /* === Spacing — Generous editorial whitespace === */
  --spacing-section: clamp(5rem, 4rem + 5vw, 9rem);
  --spacing-section-sm: clamp(3rem, 2.5rem + 2.5vw, 5rem);
  --spacing-element: clamp(1.5rem, 1.25rem + 1.25vw, 2.5rem);

  /* === Layout — Narrow prose width for editorial feel === */
  --max-width-prose: 48rem;   /* ~768px — narrow content area per user decision (700-800px) */
  --max-width-wide: 72rem;    /* ~1152px — for wider layouts if needed */

  /* === Animation — timing tokens === */
  --animate-duration-fast: 150ms;
  --animate-duration-base: 200ms;
  --animate-duration-slow: 300ms;
  --animate-duration-fade: 700ms;
  --animate-stagger-delay: 150ms;
  --animate-ease-out: cubic-bezier(0, 0, 0.2, 1);
}

/* Dark mode variant (dark-first, always on) */
@custom-variant dark (&:where(.dark, .dark *));

/* === Custom utilities === */
@utility prose-width {
  max-width: var(--max-width-prose);
  margin-inline: auto;
  padding-inline: clamp(1.25rem, 1rem + 1.25vw, 2rem);
}

@utility section-padding {
  padding-block: var(--spacing-section);
}

@utility section-padding-sm {
  padding-block: var(--spacing-section-sm);
}

/* === Base layer === */
@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background-color: var(--color-background);
    background:
      radial-gradient(ellipse 80% 50% at 20% 0%, rgba(255,255,255,0.03) 0%, transparent 60%),
      linear-gradient(160deg, #0d0d0f 0%, #0a0a0a 50%, #08080a 100%);
    color: var(--color-text-primary);
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 600'%3E%3Cfilter id='a'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23a)'/%3E%3C/svg%3E");
    background-size: 200px 200px;
    opacity: 0.035;
  }

  /* Heading defaults — display font with tight tracking */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    letter-spacing: -0.02em;
    line-height: 1.1;
    font-weight: 600;
  }

  h1 { font-size: var(--font-size-4xl); }
  h2 { font-size: var(--font-size-3xl); }
  h3 { font-size: var(--font-size-2xl); }
  h4 { font-size: var(--font-size-xl); }

  /* Hero headline: larger, bolder, tighter — overrides shared heading block above */
  h1 {
    font-size: var(--font-size-5xl);
    letter-spacing: var(--tracking-editorial);
    font-weight: 700;
  }

  /* Editorial tracking for h2 — tighter than h3–h6 */
  h2 {
    letter-spacing: var(--tracking-editorial);
  }

  /* Body text defaults */
  p, li {
    font-size: var(--font-size-base);
    line-height: 1.7;
    color: var(--color-text-secondary);
  }

  /* Small-caps section labels (borrowed from Luciano Pereira reference) */
  .section-label {
    font-family: var(--font-mono);
    font-size: var(--font-size-sm);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-text-tertiary);
  }

  /* Disable all non-essential animations for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Remove default focus outline for mouse users */
  *:focus {
    outline: none;
  }

  /* Keyboard-only focus: visible ring using accent color */
  *:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: 2px;
  }
}

@layer components {
  /* Underline slides in from left on hover — editorial micro-interaction */
  .link-underline {
    position: relative;
    text-decoration: none;
  }

  .link-underline::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 1px;
    background-color: currentColor;
    transition: width var(--animate-duration-slow) var(--animate-ease-out);
  }

  .link-underline:hover::after,
  .link-underline:focus-visible::after {
    width: 100%;
  }

  /* Stagger children — each child fades in with increasing delay */
  .stagger-child {
    opacity: 0;
    transition: opacity var(--animate-duration-fade) var(--animate-ease-out);
    transition-delay: var(--stagger-delay, 0ms);
  }

  .stagger-child.is-visible {
    opacity: 1;
  }
}
