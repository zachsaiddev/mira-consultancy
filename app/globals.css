@import "tailwindcss";

@theme {
  /* === Colors — Dark monochrome palette === */
  /* Background: deep navy-black with subtle blue undertone */
  --color-background: #0a0c14;

  /* Text hierarchy — all verified WCAG AA compliant against #0a0a0a */
  --color-text-primary: #f5f5f5;    /* Ratio: 18.2:1 — main body text */
  --color-text-secondary: #a3a3a3;  /* Ratio: 7.8:1  — supporting text, descriptions */
  --color-text-tertiary: #7a7a7a;   /* Ratio: 4.6:1  — subtle labels, metadata */

  /* Accent — muted steel blue for emphasis and CTAs */
  --color-accent: #7a9eb8;          /* Ratio: ~5.5:1 — muted steel blue, WCAG AA compliant against #0a0a0a */

  /* === Typography — Font families === */
  --font-sans: var(--font-inter), ui-sans-serif, system-ui, sans-serif;
  --font-display: var(--font-manrope), ui-sans-serif, system-ui, sans-serif;
  --font-mono: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, monospace;

  /* === Typography — Fluid type scale (Perfect Fourth 1.333 ratio) === */
  /* Each level: clamp(min, preferred, max) */
  /* Min: mobile (320px), Max: desktop (1280px+) */
  --font-size-sm: clamp(0.875rem, 0.83rem + 0.22vw, 1rem);
  --font-size-base: clamp(1rem, 0.94rem + 0.28vw, 1.125rem);
  --font-size-lg: clamp(1.125rem, 1rem + 0.63vw, 1.5rem);
  --font-size-xl: clamp(1.5rem, 1.25rem + 1.25vw, 2rem);
  --font-size-2xl: clamp(2rem, 1.5rem + 2.5vw, 2.667rem);
  --font-size-3xl: clamp(2.5rem, 1.88rem + 3.13vw, 3.375rem);
  --font-size-4xl: clamp(3rem, 2.25rem + 3.75vw, 4rem);
  --font-size-5xl: clamp(3.5rem, 2.5rem + 5vw, 5rem);

  /* === Typography — Letter-spacing tokens === */
  --tracking-editorial: -0.035em;

  /* === Spacing — Generous editorial whitespace === */
  --spacing-section: clamp(5rem, 4rem + 5vw, 9rem);
  --spacing-section-sm: clamp(3rem, 2.5rem + 2.5vw, 5rem);
  --spacing-element: clamp(1.5rem, 1.25rem + 1.25vw, 2.5rem);

  /* === Layout — Narrow prose width for editorial feel === */
  --max-width-prose: 50rem;   /* ~800px */
  --max-width-wide: 72rem;    /* ~1152px — for wider layouts if needed */

  /* === Animation — timing tokens === */
  --animate-duration-fast: 150ms;
  --animate-duration-base: 200ms;
  --animate-duration-slow: 300ms;
  --animate-duration-fade: 700ms;
  --animate-stagger-delay: 150ms;
  --animate-ease-out: cubic-bezier(0, 0, 0.2, 1);
}

/* Dark mode variant (dark-first, always on) */
@custom-variant dark (&:where(.dark, .dark *));

/* === Custom utilities === */
@utility prose-width {
  max-width: var(--max-width-prose);
  margin-inline: auto;
  padding-inline: clamp(1.25rem, 1rem + 1.25vw, 2rem);
}

@utility section-padding {
  padding-block: var(--spacing-section);
}

@utility section-padding-sm {
  padding-block: var(--spacing-section-sm);
}

@utility section-card {
  border: 1px solid rgba(122, 158, 184, 0.12);
  border-top: 2px solid rgba(122, 158, 184, 0.4);
  background: rgba(255, 255, 255, 0.025);
  padding: clamp(1.5rem, 1.25rem + 1.25vw, 2.5rem);
}

/* === Base layer === */
@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background-color: var(--color-background);
    color: var(--color-text-primary);
  }

  /* Film grain texture — sits above gradient orbs (-z-20), below content */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -10;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 600'%3E%3Cfilter id='a'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23a)'/%3E%3C/svg%3E");
    background-size: 200px 200px;
    opacity: 0.12;
  }

  /* === Animated gradient orbs === */
  .gradient-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(100px);
    will-change: transform, opacity, translate;
    transition: translate 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
  }

  /* All orbs anchored within viewport — startY in JS handles scroll staggering */
  .gradient-orb-blue {
    width: 60vw;
    height: 60vh;
    top: -10%;
    left: 10%;
    background: radial-gradient(circle, rgba(105,197,240,0.245) 0%, transparent 70%);
    animation: drift-blue 25s ease-in-out infinite;
  }

  .gradient-orb-violet {
    width: 50vw;
    height: 50vh;
    top: 10%;
    right: -5%;
    background: radial-gradient(circle, rgba(123,92,214,0.196) 0%, transparent 70%);
    animation: drift-violet 30s ease-in-out infinite;
  }

  .gradient-orb-teal {
    width: 50vw;
    height: 55vh;
    top: 5%;
    left: -15%;
    background: radial-gradient(circle, rgba(72,199,176,0.105) 0%, transparent 70%);
    animation: drift-teal 26s ease-in-out infinite;
  }

  .gradient-orb-magenta {
    width: 45vw;
    height: 45vh;
    top: 15%;
    left: -10%;
    background: radial-gradient(circle, rgba(200,77,176,0.154) 0%, transparent 70%);
    animation: drift-magenta 28s ease-in-out infinite;
  }

  .gradient-orb-coral {
    width: 55vw;
    height: 50vh;
    top: 10%;
    right: 5%;
    background: radial-gradient(circle, rgba(244,112,96,0.175) 0%, transparent 70%);
    animation: drift-coral 32s ease-in-out infinite;
  }

  .gradient-orb-indigo {
    width: 45vw;
    height: 50vh;
    top: 20%;
    left: -5%;
    background: radial-gradient(circle, rgba(88,86,214,0.196) 0%, transparent 70%);
    animation: drift-indigo 29s ease-in-out infinite;
  }

  @keyframes drift-blue {
    0%, 100% { transform: translate(0, 0) scale(1); opacity: 1; }
    25% { transform: translate(8vw, 5vh) scale(1.1); opacity: 0.8; }
    50% { transform: translate(-3vw, 10vh) scale(0.95); opacity: 1; }
    75% { transform: translate(5vw, -3vh) scale(1.05); opacity: 0.85; }
  }

  @keyframes drift-violet {
    0%, 100% { transform: translate(0, 0) scale(1); opacity: 1; }
    25% { transform: translate(-6vw, 8vh) scale(1.08); opacity: 0.85; }
    50% { transform: translate(4vw, 3vh) scale(1.15); opacity: 0.75; }
    75% { transform: translate(-3vw, -5vh) scale(0.9); opacity: 1; }
  }

  @keyframes drift-magenta {
    0%, 100% { transform: translate(0, 0) scale(1); opacity: 1; }
    25% { transform: translate(10vw, -4vh) scale(1.12); opacity: 0.8; }
    50% { transform: translate(5vw, 8vh) scale(0.92); opacity: 0.9; }
    75% { transform: translate(-4vw, 3vh) scale(1.05); opacity: 1; }
  }

  @keyframes drift-teal {
    0%, 100% { transform: translate(0, 0) scale(1); opacity: 1; }
    25% { transform: translate(-7vw, 6vh) scale(1.08); opacity: 0.85; }
    50% { transform: translate(5vw, -4vh) scale(0.95); opacity: 0.9; }
    75% { transform: translate(3vw, 8vh) scale(1.1); opacity: 0.8; }
  }

  @keyframes drift-coral {
    0%, 100% { transform: translate(0, 0) scale(1); opacity: 1; }
    25% { transform: translate(-8vw, -6vh) scale(1.1); opacity: 0.9; }
    50% { transform: translate(3vw, -10vh) scale(1.05); opacity: 0.8; }
    75% { transform: translate(-5vw, 4vh) scale(0.95); opacity: 1; }
  }

  @keyframes drift-indigo {
    0%, 100% { transform: translate(0, 0) scale(1); opacity: 1; }
    25% { transform: translate(6vw, -5vh) scale(1.05); opacity: 0.85; }
    50% { transform: translate(-4vw, 7vh) scale(1.12); opacity: 0.75; }
    75% { transform: translate(8vw, 3vh) scale(0.92); opacity: 1; }
  }

  /* Pause orb animations for reduced-motion users */
  @media (prefers-reduced-motion: reduce) {
    .gradient-orb {
      animation: none !important;
    }
  }

  /* Heading defaults — display font with tight tracking */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    letter-spacing: -0.02em;
    line-height: 1.1;
    font-weight: 600;
  }

  h1 { font-size: var(--font-size-4xl); }
  h2 { font-size: var(--font-size-3xl); }
  h3 { font-size: var(--font-size-2xl); }
  h4 { font-size: var(--font-size-xl); }

  /* Hero headline: larger, bolder, tighter — overrides shared heading block above */
  h1 {
    font-size: var(--font-size-5xl);
    letter-spacing: var(--tracking-editorial);
    font-weight: 700;
  }

  /* Editorial tracking for h2 + accent underline bar */
  h2 {
    letter-spacing: var(--tracking-editorial);
    position: relative;
    display: inline-block;
    padding-bottom: 0.75rem;
  }

  h2::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 3rem;
    height: 2px;
    background: var(--color-accent);
  }

  /* Body text defaults */
  p, li {
    font-size: var(--font-size-base);
    line-height: 1.7;
    color: var(--color-text-secondary);
  }

  /* Small-caps section labels — accent color for visual punch */
  .section-label {
    font-family: var(--font-mono);
    font-size: var(--font-size-sm);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-accent);
  }

  /* Disable all non-essential animations for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Remove default focus outline for mouse users */
  *:focus {
    outline: none;
  }

  /* Keyboard-only focus: visible ring using accent color */
  *:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: 2px;
  }
}

@layer components {
  /* Underline slides in from left on hover — editorial micro-interaction */
  .link-underline {
    position: relative;
    text-decoration: none;
  }

  .link-underline::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 1px;
    background-color: currentColor;
    transition: width var(--animate-duration-slow) var(--animate-ease-out);
  }

  .link-underline:hover::after,
  .link-underline:focus-visible::after {
    width: 100%;
  }

  /* Stagger children — each child fades in with increasing delay */
  .stagger-child {
    opacity: 0;
    transition: opacity var(--animate-duration-fade) var(--animate-ease-out);
    transition-delay: var(--stagger-delay, 0ms);
  }

  .stagger-child.is-visible {
    opacity: 1;
  }
}
