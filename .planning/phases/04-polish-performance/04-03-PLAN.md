---
phase: 04-polish-performance
plan: 03
type: execute
wave: 2
depends_on: ["04-01", "04-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Lighthouse Performance score >90 on mobile"
    - "Core Web Vitals meet thresholds (CLS <0.1, LCP <2.5s)"
    - "Site tested on real mobile device with no layout breaks"
    - "OpenGraph image and metadata render correctly in preview tools"
  artifacts: []
  key_links: []
---

<objective>
Deploy the optimized site to GitHub Pages, run Lighthouse audit on the live URL, verify OG metadata with a preview tool, and present results for mobile device testing by the user.

Purpose: This is the validation plan — it proves that Plans 01 and 02 achieved the Lighthouse >90 target, OG tags work, and the site is ready for production. The user will verify on their actual iPhone.

Output: Lighthouse report, OG preview confirmation, mobile testing checkpoint.
</objective>

<execution_context>
@/Users/zach.said/.claude/get-shit-done/workflows/execute-plan.md
@/Users/zach.said/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-polish-performance/04-RESEARCH.md
@.planning/phases/04-polish-performance/04-01-SUMMARY.md
@.planning/phases/04-polish-performance/04-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Deploy and run Lighthouse audit on live URL</name>
  <files></files>
  <action>
1. Build the site and verify it succeeds:
   ```bash
   npm run build
   ```

2. Deploy to GitHub Pages. The repo is `zachsaiddev/mira-consultancy`. Check the existing deployment method:
   - Look for `.github/workflows/` for a GitHub Actions deployment workflow
   - If an Actions workflow exists, push the changes and let the workflow deploy
   - If no workflow exists, use `gh-pages` branch or manual push

3. Wait for deployment to complete. Verify the site is live:
   ```bash
   curl -s -o /dev/null -w "%{http_code}" https://zachsaiddev.github.io/mira-consultancy/
   ```
   Should return 200.

4. Run Lighthouse on the live deployed URL (average 3 runs for stable score):
   ```bash
   npx lighthouse https://zachsaiddev.github.io/mira-consultancy/ \
     --form-factor=mobile \
     --throttling-method=simulate \
     --output=json \
     --output-path=./lighthouse-mobile.json \
     --chrome-flags="--headless"
   ```

   Run 3 times and take the median Performance score. Score varies +/-5 points between runs — this is normal per research.

5. Parse the Lighthouse results and report:
   - Performance score (target: >90)
   - LCP (target: <2.5s)
   - CLS (target: <0.1)
   - TBT (target: <300ms, proxy for FID)
   - Accessibility score
   - Best Practices score

6. If Performance score is below 90, identify the top 3 opportunities from the Lighthouse report and fix them. Common culprits:
   - LCP: If still above 2.5s, check if zach.webp is being loaded eagerly on first viewport. Add `priority` prop to the hero logo Image component if LCP bottleneck is the logo.
   - TBT: If above 300ms, the gradient orb rAF loop may need throttling or the JS bundle may need code splitting.
   - CLS: If above 0.1, check for images without explicit width/height or font loading shifts.

7. Verify OG metadata by checking the built HTML output:
   ```bash
   grep -i "og:image" out/index.html
   grep -i "og:title" out/index.html
   grep -i "og:description" out/index.html
   grep -i "twitter:card" out/index.html
   ```
   All four must be present with correct values.

NOTE: Lighthouse CLI requires Chrome/Chromium. If not available in the environment, use the Lighthouse JSON output from a `next build` + `npx serve out` local server instead:
```bash
npx serve out -l 3000 &
npx lighthouse http://localhost:3000/mira-consultancy/ --form-factor=mobile --output=json --chrome-flags="--headless"
```
  </action>
  <verify>
    - Lighthouse Performance score >90 on mobile (median of 3 runs)
    - LCP < 2.5s
    - CLS < 0.1
    - TBT < 300ms
    - OG meta tags present in built HTML output
    - Site returns 200 on deployed URL
  </verify>
  <done>Lighthouse mobile Performance >90. Core Web Vitals within thresholds. OG tags verified in HTML output. Site deployed and accessible.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Mobile device and OG preview verification</name>
  <files></files>
  <action>
Present verification checklist to the user. This is a human-verify checkpoint — Claude has completed all automated work in Tasks 1. The user must now verify on their actual device.

What was built in Phase 4:
- All images converted to WebP (zach.png: 2.3MB -> ~30-50KB WebP, logo.png -> WebP)
- profile.jpg 404 bug fixed in About.tsx
- Branded OG image (1200x630, dark background with Mira logo + tagline)
- Full OpenGraph + Twitter Card metadata in layout.tsx
- AnimatedSection now respects prefers-reduced-motion (no opacity flash)
- Gradient orb blur optimized from 100px to 70px for mobile GPU
- Lighthouse Performance score: [SCORE from Task 1] (target: >90)

Verification steps for the user:

**1. Mobile test on your iPhone:**
Open https://zachsaiddev.github.io/mira-consultancy/ on your iPhone in Safari.

Check:
- Page loads quickly (perceived speed)
- All images load (profile photo in Intro and About, logo in Hero)
- Gradient background animates smoothly (no jank or dropped frames)
- Text is readable at all sizes
- Touch targets (buttons) are easy to tap
- Scroll is smooth through all sections
- Landscape orientation: no layout breaks

**2. OG preview check:**
Paste the URL into one of these tools to verify the social media preview:
- https://www.opengraph.xyz/url/https://zachsaiddev.github.io/mira-consultancy/
- Or paste the URL into a Slack/iMessage/LinkedIn draft to see the preview card

Expected preview:
- Image: Dark background with Mira logo and tagline
- Title: "Mira Consultancy — Custom Software for Growing Businesses"
- Description: "Custom applications, AI agents, and workflow automation..."

**3. Keyboard navigation (optional, on desktop):**
Tab through the page — every CTA button should show a visible blue focus ring.
  </action>
  <verify>User confirms all checks pass by typing "approved"</verify>
  <done>User has verified mobile experience on iPhone, OG preview renders correctly, and keyboard navigation works. Phase 4 complete.</done>
</task>

</tasks>

<verification>
1. Lighthouse Performance >90 on mobile
2. Core Web Vitals: CLS <0.1, LCP <2.5s, TBT <300ms
3. OG meta tags present and correct in built HTML
4. User confirms mobile experience on iPhone
5. User confirms OG preview renders correctly
</verification>

<success_criteria>
- Lighthouse mobile Performance score >90 (median of 3 runs)
- Core Web Vitals within thresholds
- User approves mobile experience on iPhone
- User confirms OG preview image and metadata
- All Phase 4 success criteria from ROADMAP.md are met
</success_criteria>

<output>
After completion, create `.planning/phases/04-polish-performance/04-03-SUMMARY.md`
</output>
