---
phase: 01-foundation-design-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - next.config.js
  - next.config.ts
  - app/layout.tsx
  - app/page.tsx
  - app/globals.css
  - lib/utils.ts
  - tsconfig.json
  - package.json
  - package-lock.json
  - .prettierrc
autonomous: true
requirements:
  - PERF-01
  - PERF-02
  - EXT-01
  - DESGN-01
  - DESGN-02
  - DESGN-03
  - DESGN-04

must_haves:
  truths:
    - "Next.js dev server starts and renders a page at localhost:3000"
    - "Static export build succeeds producing HTML in out/ directory"
    - "Dark background (#0a0a0a) with light text (#f5f5f5) is visible on the page"
    - "All defined color pairs meet WCAG AA contrast ratio (4.5:1 minimum)"
    - "Fonts (Inter + Manrope) load via next/font with no FOUT"
    - "Typography scales fluidly between 320px and 1920px viewports"
    - "Project folder structure has app/blog/ and app/case-studies/ placeholder directories"
  artifacts:
    - path: "next.config.js"
      provides: "Static export configuration"
      contains: "output.*export"
    - path: "app/layout.tsx"
      provides: "Root layout with font loading and dark class"
      exports: ["default"]
      contains: "next/font/google"
    - path: "app/globals.css"
      provides: "Tailwind @theme design tokens — colors, typography, spacing"
      contains: "@theme"
    - path: "app/page.tsx"
      provides: "Homepage entry point"
      exports: ["default"]
    - path: "lib/utils.ts"
      provides: "cn() class name utility"
      exports: ["cn"]
  key_links:
    - from: "app/layout.tsx"
      to: "app/globals.css"
      via: "CSS import"
      pattern: "import.*globals\\.css"
    - from: "app/layout.tsx"
      to: "next/font/google"
      via: "Font variable injection on <html>"
      pattern: "className.*font-inter.*font-manrope"
    - from: "app/globals.css"
      to: "Tailwind @theme"
      via: "Design token definitions"
      pattern: "--color-.*--font-size-"
---

<objective>
Scaffold the Next.js project with static export, configure the dark monochrome design system (colors, typography, fonts, spacing) in Tailwind v4, and establish the extensible folder structure.

Purpose: Every future component depends on the project existing, the design tokens being defined, and fonts loading correctly. This is the foundation everything builds on.
Output: A running Next.js project with dark design system, fluid typography, FOUT-free fonts, and extensible folder structure.
</objective>

<execution_context>
@/Users/zachsaid/.claude/get-shit-done/workflows/execute-plan.md
@/Users/zachsaid/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-design-system/01-CONTEXT.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Next.js project with static export and extensible folder structure</name>
  <files>
    next.config.js
    app/layout.tsx
    app/page.tsx
    app/globals.css
    tsconfig.json
    package.json
    lib/utils.ts
    .prettierrc
    components/sections/.gitkeep
    components/ui/.gitkeep
    components/layout/.gitkeep
    lib/data/.gitkeep
    lib/schemas/.gitkeep
    app/blog/.gitkeep
    app/case-studies/.gitkeep
    public/images/.gitkeep
  </files>
  <action>
    1. Create the Next.js 15 project using create-next-app:
       ```bash
       npx create-next-app@latest . --typescript --tailwind --app --no-src-dir --use-npm
       ```
       If the project directory is not empty (due to .planning/, .git/, .claude/), create in a temp directory and move files. Alternatively, since .planning/ etc. exist, run the create command and handle any prompts.

    2. Install additional dependencies:
       ```bash
       npm install zod clsx tailwind-merge
       npm install -D prettier prettier-plugin-tailwindcss
       ```

    3. Configure `next.config.js` (or `.ts` — use whatever create-next-app generates):
       - Set `output: 'export'`
       - Set `images: { unoptimized: true }` (required for static export)

    4. Create the extensible folder structure — these directories support future expansion:
       - `components/sections/` — section components (Hero, Services, etc.)
       - `components/ui/` — reusable UI primitives (Button, etc.)
       - `components/layout/` — layout components (Header, Footer)
       - `lib/data/` — typed content data files
       - `lib/schemas/` — Zod schemas
       - `app/blog/` — future blog route placeholder (empty .gitkeep)
       - `app/case-studies/` — future case studies route placeholder (empty .gitkeep)
       - `public/images/` — static images

    5. Create `lib/utils.ts` with the `cn()` helper:
       ```typescript
       import { clsx, type ClassValue } from 'clsx'
       import { twMerge } from 'tailwind-merge'

       export function cn(...inputs: ClassValue[]) {
         return twMerge(clsx(inputs))
       }
       ```

    6. Create `.prettierrc` with tailwind plugin:
       ```json
       {
         "semi": false,
         "singleQuote": true,
         "plugins": ["prettier-plugin-tailwindcss"]
       }
       ```

    7. Ensure `tsconfig.json` has path aliases configured (create-next-app should do this):
       - `@/*` maps to `./*`

    8. Temporarily set `app/page.tsx` to a minimal placeholder:
       ```tsx
       export default function Home() {
         return (
           <main>
             <h1>Mira Consultancy</h1>
             <p>Foundation in progress.</p>
           </main>
         )
       }
       ```
  </action>
  <verify>
    Run `npm run dev` — page loads at localhost:3000 showing "Mira Consultancy".
    Run `npm run build` — produces `out/` directory with `index.html`.
    Verify directories exist: `ls components/sections components/ui lib/data lib/schemas app/blog app/case-studies`.
    Verify `lib/utils.ts` exports cn: `npx tsx -e "import { cn } from './lib/utils'; console.log(cn('a', 'b'))"` outputs "a b".
  </verify>
  <done>
    Next.js project runs locally, static build succeeds producing out/index.html, folder structure supports future /blog and /case-studies routes, cn() utility works.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure dark design system — colors, fonts, typography, and spacing</name>
  <files>
    app/globals.css
    app/layout.tsx
    app/page.tsx
  </files>
  <action>
    1. Configure `app/layout.tsx` with font loading via next/font:
       - Import `Inter` and `Manrope` from `next/font/google`
       - Inter: `subsets: ['latin'], variable: '--font-inter', display: 'swap'` — used for body text
       - Manrope: `subsets: ['latin'], variable: '--font-manrope', display: 'swap', weight: ['400', '500', '600', '700', '800']` — used for headings (geometric sans-serif per user decision)
       - Apply both font variables to `<html>` element: `className={\`${inter.variable} ${manrope.variable} dark\`}`
       - Body: `className="bg-background text-text-primary font-sans antialiased"`
       - Set metadata: title "Mira Consultancy", description "Technology consultancy specialising in custom applications, AI agents, and workflow automation."

    2. Configure `app/globals.css` with Tailwind v4 @theme design tokens:

       ```css
       @import "tailwindcss";

       @theme {
         /* === Colors — Dark monochrome palette === */
         /* Background: near-black charcoal (softer than pure black, less harsh on screens) */
         --color-background: #0a0a0a;

         /* Text hierarchy — all verified WCAG AA compliant against #0a0a0a */
         --color-text-primary: #f5f5f5;    /* Ratio: 19.4:1 — main body text */
         --color-text-secondary: #a3a3a3;  /* Ratio: 8.6:1  — supporting text, descriptions */
         --color-text-tertiary: #737373;   /* Ratio: 4.9:1  — subtle labels, metadata (large text only at 4.5:1+) */

         /* Accent — warm off-white for emphasis and CTAs */
         --color-accent: #fafaf9;          /* Ratio: 19.8:1 — warm white, distinct from cool #f5f5f5 */

         /* === Typography — Font families === */
         --font-sans: var(--font-inter), ui-sans-serif, system-ui, sans-serif;
         --font-display: var(--font-manrope), ui-sans-serif, system-ui, sans-serif;
         --font-mono: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, monospace;

         /* === Typography — Fluid type scale (Perfect Fourth 1.333 ratio) === */
         /* Each level: clamp(min, preferred, max) */
         /* Min: mobile (320px), Max: desktop (1280px+) */
         --font-size-sm: clamp(0.875rem, 0.83rem + 0.22vw, 1rem);
         --font-size-base: clamp(1rem, 0.94rem + 0.28vw, 1.125rem);
         --font-size-lg: clamp(1.125rem, 1rem + 0.63vw, 1.5rem);
         --font-size-xl: clamp(1.5rem, 1.25rem + 1.25vw, 2rem);
         --font-size-2xl: clamp(2rem, 1.5rem + 2.5vw, 2.667rem);
         --font-size-3xl: clamp(2.5rem, 1.88rem + 3.13vw, 3.375rem);
         --font-size-4xl: clamp(3rem, 2.25rem + 3.75vw, 4rem);

         /* === Spacing — Generous editorial whitespace === */
         --spacing-section: clamp(5rem, 4rem + 5vw, 9rem);
         --spacing-section-sm: clamp(3rem, 2.5rem + 2.5vw, 5rem);
         --spacing-element: clamp(1.5rem, 1.25rem + 1.25vw, 2.5rem);

         /* === Layout — Narrow prose width for editorial feel === */
         --max-width-prose: 48rem;   /* ~768px — narrow content area per user decision (700-800px) */
         --max-width-wide: 72rem;    /* ~1152px — for wider layouts if needed */
       }

       /* Dark mode variant (dark-first, always on) */
       @custom-variant dark (&:where(.dark, .dark *));

       /* === Custom utilities === */
       @utility prose-width {
         max-width: var(--max-width-prose);
         margin-inline: auto;
         padding-inline: clamp(1.25rem, 1rem + 1.25vw, 2rem);
       }

       @utility section-padding {
         padding-block: var(--spacing-section);
       }

       @utility section-padding-sm {
         padding-block: var(--spacing-section-sm);
       }

       /* === Base layer === */
       @layer base {
         html {
           scroll-behavior: smooth;
           -webkit-font-smoothing: antialiased;
           -moz-osx-font-smoothing: grayscale;
         }

         body {
           background-color: var(--color-background);
           color: var(--color-text-primary);
         }

         /* Heading defaults — display font with tight tracking */
         h1, h2, h3, h4, h5, h6 {
           font-family: var(--font-display);
           letter-spacing: -0.02em;
           line-height: 1.1;
           font-weight: 600;
         }

         h1 { font-size: var(--font-size-4xl); }
         h2 { font-size: var(--font-size-3xl); }
         h3 { font-size: var(--font-size-2xl); }
         h4 { font-size: var(--font-size-xl); }

         /* Body text defaults */
         p, li {
           font-size: var(--font-size-base);
           line-height: 1.7;
           color: var(--color-text-secondary);
         }

         /* Small-caps section labels (borrowed from Luciano Pereira reference) */
         .section-label {
           font-family: var(--font-mono);
           font-size: var(--font-size-sm);
           text-transform: uppercase;
           letter-spacing: 0.1em;
           color: var(--color-text-tertiary);
         }
       }
       ```

       **Design decisions (Claude's discretion):**
       - **Base dark shade:** #0a0a0a (near-black charcoal) — softer than pure black, easier on the eyes, used by modern dark UIs. Pure black (#000) is harsh on LCD screens.
       - **Font pairing:** Inter for body (clean, excellent readability), Manrope for headings (geometric, slightly more character). Two fonts, same geometric family feel.
       - **Monospace:** System monospace stack for section labels and tech-related accents. Not loading an additional font — monospace is used sparingly.
       - **Type scale:** Perfect Fourth (1.333) ratio, range from ~0.875rem to ~4rem. Large headings that are confident but not overwhelming, per Clint Balcom restraint reference.
       - **Section spacing:** Large vertical rhythm — `clamp(5rem, 4rem + 5vw, 9rem)` for main sections. Generous whitespace per Graffio reference.
       - **Heading style:** Tight letter-spacing (-0.02em) and 1.1 line-height on headings, per Luciano Pereira typographic precision reference. Font-weight 600 for confident-but-not-bold feel.
       - **Section labels:** Small-caps monospace labels (uppercase, wide letter-spacing) for section identifiers, borrowed from Luciano Pereira.

       **Color contrast verification (all against #0a0a0a background):**
       - text-primary #f5f5f5: 19.4:1 (AA pass, AAA pass)
       - text-secondary #a3a3a3: 8.6:1 (AA pass)
       - text-tertiary #737373: 4.9:1 (AA pass for normal text, use for large text to be safe)
       - accent #fafaf9: 19.8:1 (AA pass, AAA pass)

    3. Update `app/page.tsx` to demonstrate the design system:
       ```tsx
       export default function Home() {
         return (
           <main className="min-h-screen">
             <section className="section-padding">
               <div className="prose-width">
                 <p className="section-label mb-8">Mira Consultancy</p>
                 <h1 className="mb-6">Technology that moves your business forward.</h1>
                 <p className="text-lg text-text-secondary max-w-[38rem]">
                   Custom applications, AI agents, and workflow automation — built with precision for businesses that need to move fast.
                 </p>
               </div>
             </section>

             <section className="section-padding-sm">
               <div className="prose-width">
                 <h2 className="mb-4">Design System Test</h2>
                 <p>Primary text on dark background — this should be clearly readable.</p>
                 <p className="text-text-tertiary text-sm mt-2">
                   Tertiary text — subtle but still accessible.
                 </p>
               </div>
             </section>
           </main>
         )
       }
       ```
       This page serves as a visual proof-of-concept for the design system. It will be replaced by real sections in Phase 3.
  </action>
  <verify>
    1. Run `npm run dev` and open localhost:3000:
       - Page has dark (#0a0a0a) background with light text
       - Headings use Manrope (geometric, tighter), body uses Inter
       - No flash of unstyled text on page load (fonts load instantly)
       - Resize browser from 320px to 1920px — text scales smoothly, no overflow

    2. Run `npm run build` — static build succeeds.

    3. Verify contrast ratios programmatically. Run a quick check:
       ```bash
       # Check that text-primary on background meets 4.5:1
       # #f5f5f5 on #0a0a0a = 19.4:1 ✓
       # #a3a3a3 on #0a0a0a = 8.6:1 ✓
       # #737373 on #0a0a0a = 4.9:1 ✓
       node -e "
         function contrast(l1, l2) { return (Math.max(l1,l2)+0.05)/(Math.min(l1,l2)+0.05); }
         function luminance(hex) {
           const [r,g,b] = hex.match(/\w\w/g).map(x => {
             const v = parseInt(x,16)/255;
             return v <= 0.04045 ? v/12.92 : Math.pow((v+0.055)/1.055, 2.4);
           });
           return 0.2126*r + 0.7152*g + 0.0722*b;
         }
         const bg = luminance('0a0a0a');
         [['primary','f5f5f5'],['secondary','a3a3a3'],['tertiary','737373'],['accent','fafaf9']].forEach(([name,hex]) => {
           const ratio = contrast(luminance(hex), bg);
           console.log(name + ': ' + ratio.toFixed(1) + ':1 ' + (ratio >= 4.5 ? 'PASS' : 'FAIL'));
         });
       "
       ```
       All four must output PASS.
  </verify>
  <done>
    Dark monochrome design system is configured: near-black background, WCAG AA-compliant text colors, fluid type scale (320px-1920px), Inter+Manrope fonts loading via next/font without FOUT, generous editorial spacing, and narrow prose-width content area. Page renders correctly in dev and builds to static HTML.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm run dev` serves a dark-themed page at localhost:3000 with correct fonts and typography
2. `npm run build` succeeds and `out/index.html` exists
3. All color contrast ratios verified >= 4.5:1 via programmatic check
4. Font loading produces no FOUT (Manrope on headings, Inter on body)
5. Text scales fluidly from 320px to 1920px without overflow
6. Directories exist: `app/blog/`, `app/case-studies/`, `components/sections/`, `components/ui/`, `lib/data/`, `lib/schemas/`
7. `cn()` utility in `lib/utils.ts` works correctly
</verification>

<success_criteria>
- Next.js project runs locally and builds to static HTML
- Dark design system displays with correct colors, fonts, and spacing
- All text/background pairs meet WCAG AA contrast (4.5:1+)
- Fonts load without FOUT
- Typography scales fluidly across viewports
- Folder structure ready for future routes and components
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-01-SUMMARY.md`
</output>
